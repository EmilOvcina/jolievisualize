import { preprocess } from './preprocess';

// const json: Data = JSON.parse(data);
const json: Data = JSON.parse(
	`{"name":"jolieexample","interfaces":[{"name":"FaxInterface","reqres":[{"name":"fax","res":"void","req":"FaxRequest"}]},{"name":"PrinterInterface","reqres":[{"name":"print","res":"PrintResponse","req":"PrintRequest"}],"oneway":[{"name":"del","req":"JobID"}]},{"name":"AggregatorInterface","reqres":[{"name":"faxAndPrint","res":"void","req":"FaxAndPrintRequest"}]}],"types":[{"name":"PrintRequest","subTypes":[{"name":"content","type":"string"}]},{"name":"PrintResponse","type":"JobID"},{"name":"FaxAndPrintRequest","subTypes":[{"name":"print","type":"PrintRequest"},{"name":"fax","type":"FaxRequest"}]},{"name":"FaxRequest","subTypes":[{"name":"destination","type":"string"},{"name":"content","type":"string"}]},{"name":"JobID","subTypes":[{"name":"jobId","type":"string"}]}],"placegraph":[{"nodes":[{"type":"site","id":0},{"name":"Aggregator","nodes":[{"type":"site","id":1},{"name":"Console","nodes":[{"type":"site","id":2}],"id":1,"type":"service"},{"name":"Fax","nodes":[{"type":"site","id":3},{"name":"Console","nodes":[{"type":"site","id":4}],"id":2,"type":"service"}],"id":5,"type":"service"},{"name":"Printer","nodes":[{"type":"site","id":5},{"name":"Console","nodes":[{"type":"site","id":6}],"id":4,"type":"service"}],"id":0,"type":"service"}],"id":3,"type":"service"},{"name":"Client","nodes":[{"type":"site","id":7},{"name":"Console","nodes":[{"type":"site","id":8}],"id":6,"type":"service"}],"id":7,"type":"service"}],"id":0,"type":"network"}],"services":[{"embeddings":[{"name":"Console","type":"jolie","port":"Console"}],"execution":"concurrent","outputPorts":[{"name":"Console","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"}],"name":"Printer","inputPorts":[{"name":"PrinterInput","protocol":"sodep","interfaces":[{"name":"PrinterInterface"}],"location":"socket:\/\/localhost:9000"}],"id":0},{"name":"Console","execution":"single","inputPorts":[{"name":"ConsoleInput","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"}],"id":1},{"name":"Console","execution":"single","inputPorts":[{"name":"ConsoleInput","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"}],"id":2},{"embeddings":[{"name":"Console","type":"jolie","port":"Console"},{"name":"Fax","type":"jolie","port":"Fax"},{"name":"Printer","type":"jolie","port":"printer"}],"execution":"concurrent","outputPorts":[{"name":"Console","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"},{"name":"printer","protocol":"sodep","interfaces":[{"name":"PrinterInterface"}],"location":"socket:\/\/localhost:9000"},{"name":"Fax","protocol":"sodep","interfaces":[{"name":"FaxInterface"}],"location":"socket:\/\/localhost:9001"}],"name":"Aggregator","inputPorts":[{"name":"Aggregator","protocol":"sodep","interfaces":[{"name":"AggregatorInterface"}],"location":"socket:\/\/localhost:9002","aggregates":[{"name":"printer"},{"name":"Fax"}]}],"id":3},{"name":"Console","execution":"single","inputPorts":[{"name":"ConsoleInput","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"}],"id":4},{"embeddings":[{"name":"Console","type":"jolie","port":"Console"}],"execution":"concurrent","outputPorts":[{"name":"Console","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"}],"name":"Fax","inputPorts":[{"name":"FaxInput","protocol":"sodep","interfaces":[{"name":"FaxInterface"}],"location":"socket:\/\/localhost:9001"}],"id":5},{"name":"Console","execution":"single","inputPorts":[{"name":"ConsoleInput","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"}],"id":6},{"embeddings":[{"name":"Console","type":"jolie","port":"Console"}],"name":"Client","execution":"single","id":7,"outputPorts":[{"name":"Console","protocol":"sodep","interfaces":[{"name":"ConsoleIface"}],"location":"local"},{"name":"Aggregator","protocol":"sodep","interfaces":[{"name":"AggregatorInterface"},{"name":"PrinterInterface"},{"name":"FaxInterface"}],"location":"socket:\/\/localhost:9002"}]}]}`
);

//pre-processing here
const processedData: Data = preprocess(json);

export const services: Service[] = processedData.services;
export const interfaces: Interface[] = processedData.interfaces;
export const types: Type[] = processedData.types;
export const placegraph: pgNode[] = processedData.placegraph;
export const name: string = processedData.name;
